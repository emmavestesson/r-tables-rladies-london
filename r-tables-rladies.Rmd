---
title: "Making reproducible tables in R"
subtitle: "A whirlwind tour"
author: "Emma Vestesson"
date: "2022-07-12"
output:
  xaringan::moon_reader:
    css: ["default", "rladies", "rladies-fonts"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

# Background

I am Senior Data Analyst at the Health Foundation and a PhD student at UCL and the Alan Turing Institute. This means that I spend a lot of my time writing papers and reports.

--

- I have been using ggplot2 to automate plot creation for years but for a long time I was creating tables manually
- Copying and pasting from the R console is error prone
- Hours wasted on formatting only to find out that a table needs updating
- Switching to creating tables in R has saved me time and made paper writing easier

---

# Packages


.pull-left[
gt package  
![](https://gt.rstudio.com/reference/figures/logo.svg)

]

.pull-right[
gtsummary 
<img src="https://github.com/ddsjoberg/gtsummary/raw/main/man/figures/logo.png" style="width: 70%" />
]


---

# tbl_summary Summary statistics

```{r}
trial %>%
  select(age, trt, marker) %>%
  tbl_summary(
    by = trt,
    label = list(age = "Patient Age")
  )
```


---

# tbl_cross cross tabing

```{r}
trial %>%
  tbl_cross(row = trt, col = response) %>%
  add_p() %>%
  bold_labels()
```

---

# tbl_regression

```{r}
library(survival)

 adjusted <- coxph(Surv(ttdeath, death) ~ age + marker, trial) %>%
  tbl_regression(exponentiate = TRUE)
 
 adjusted

```

---

# Combine tables

```{r}
theme_gtsummary_journal(journal = 'lancet')
trial %>%
  select(age, trt, marker) %>%
  tbl_summary(
    by = trt,
    label = list(age = "Patient Age")
  )

reset_gtsummary_theme()
```
---
# Themes

Journals have different requirements

---

# Why do we need gt? 

Allows almost any type of formatting

I mainly use it when the dataset is too big for gtsummary
---

# A word of caution
```{r, echo=FALSE, out.height="10%", out.width="73%"}
knitr::include_graphics(here::here('print_engines.png'))
```


